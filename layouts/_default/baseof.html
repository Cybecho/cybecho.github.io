<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} - {{ .Site.Title }}{{ end }}</title>
  
  <!-- SEO Meta Tags -->
  <meta name="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.subtitle }}{{ end }}">
  <meta name="author" content="{{ .Site.Params.author.name }}">
  <meta name="keywords" content="{{ if .Params.tags }}{{ delimit .Params.tags ", " }}{{ else if .Site.Params.keywords }}{{ delimit .Site.Params.keywords ", " }}{{ else }}프로그래밍, 개발, 기술블로그, Hugo, GitHub{{ end }}">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="{{ .Permalink }}">
  
  <!-- Schema.org for Google -->
  <meta itemprop="name" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
  <meta itemprop="description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.subtitle }}{{ end }}">
  {{ if .Params.featured_image }}<meta itemprop="image" content="{{ .Params.featured_image | absURL }}">{{ end }}
  
  <!-- Open Graph Meta Tags -->
  <meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
  <meta property="og:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.subtitle }}{{ end }}">
  <meta property="og:type" content="{{ if .IsHome }}website{{ else }}article{{ end }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta property="og:site_name" content="{{ .Site.Title }}">
  <meta property="og:locale" content="ko_KR">
  {{ if .Params.featured_image }}<meta property="og:image" content="{{ .Params.featured_image | absURL }}">{{ end }}
  {{ if .Date }}<meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}
  {{ if .Lastmod }}<meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">{{ end }}
  {{ with .Params.tags }}{{ range . }}<meta property="article:tag" content="{{ . }}">{{ end }}{{ end }}
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}">
  <meta name="twitter:description" content="{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.subtitle }}{{ end }}">
  {{ if .Params.featured_image }}<meta name="twitter:image" content="{{ .Params.featured_image | absURL }}">{{ end }}
  
  <!-- Favicon -->
  <link rel="icon" type="image/gif" href="https://minecraft.wiki/images/Enchanted_Stone_Shovel.gif?33e82">
  
  <!-- RSS Feed -->
  {{ with .OutputFormats.Get "RSS" }}
    <link href="{{ .Permalink }}" rel="alternate" type="application/rss+xml" title="{{ $.Site.Title }}">
  {{ end }}
  
  <!-- JSON Feed for Search -->
  {{ with .OutputFormats.Get "JSON" }}
    <link href="{{ .Permalink }}" rel="alternate" type="application/json" title="{{ $.Site.Title }} Search Index">
  {{ end }}
  
  <!-- Google Fonts for Code -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;600&display=swap" rel="stylesheet">
  
  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "{{ if .IsHome }}WebSite{{ else }}{{ if eq .Type "posts" }}BlogPosting{{ else }}WebPage{{ end }}{{ end }}",
    "name": "{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}",
    "headline": "{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }}{{ end }}",
    "description": "{{ with .Description }}{{ . }}{{ else }}{{ .Site.Params.subtitle }}{{ end }}",
    "url": "{{ .Permalink }}",
    {{ if .IsHome }}
    "potentialAction": {
      "@type": "SearchAction",
      "target": "{{ .Site.BaseURL }}search/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    },
    {{ end }}
    {{ if eq .Type "posts" }}
    "author": {
      "@type": "Person",
      "name": "{{ .Site.Params.author.name }}",
      "url": "{{ .Site.BaseURL }}"
    },
    "publisher": {
      "@type": "Organization",
      "name": "{{ .Site.Title }}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ .Site.Params.author.avatar | absURL }}"
      }
    },
    "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
    "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
    {{ if .Params.featured_image }}
    "image": "{{ .Params.featured_image | absURL }}",
    {{ end }}
    {{ if .Params.tags }}
    "keywords": [{{ range $i, $tag := .Params.tags }}{{ if $i }}, {{ end }}"{{ $tag }}"{{ end }}],
    {{ end }}
    {{ end }}
    "inLanguage": "ko-KR",
    "isPartOf": {
      "@type": "WebSite",
      "name": "{{ .Site.Title }}",
      "url": "{{ .Site.BaseURL }}"
    }
  }
  </script>

  <!-- Google Search Console Verification -->
  {{ with .Site.Params.googleSiteVerification }}
  <meta name="google-site-verification" content="{{ . }}">
  {{ end }}
  
  <!-- Google Analytics -->
  {{ with .Site.Params.googleAnalytics }}
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ . }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '{{ . }}');
  </script>
  {{ end }}

  <!-- Include theme variables -->
  {{ partial "theme-vars.html" . }}
</head>
<body>
  {{ partial "header.html" . }}
  
  <main role="main">
    {{ block "main" . }}{{ end }}
  </main>
  
  <!-- Search Modal -->
  {{ partial "search.html" . }}
  
  <!-- URL Preview -->
  {{ partial "url-preview.html" . }}
  
  <!-- Code Enhancements -->
  {{ partial "code-enhancements.html" . }}
  
  <!-- Draggable TOC (Mobile) -->
  {{ partial "draggable-toc.html" . }}
  
  <!-- URL Preview Configuration -->
  <script src="/js/url-preview-config.js"></script>
  
  <!-- Load search scripts -->
  <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.6.2/dist/fuse.min.js"></script>
  <script>
    // Initialize search functionality
    document.addEventListener('DOMContentLoaded', function() {
      if (typeof initSearch === 'function') {
        initSearch();
      }
    });
    
    // Keyboard shortcuts
    document.addEventListener('keydown', function(e) {
      // Ctrl+K or Cmd+K to open search
      if ((e.ctrlKey || e.metaKey) && e.key === 'k') {
        e.preventDefault();
        const searchModal = document.getElementById('search-modal');
        if (searchModal) {
          searchModal.style.display = 'block';
          document.getElementById('search-input').focus();
        }
      }
      
      // Escape to close search
      if (e.key === 'Escape') {
        const searchModal = document.getElementById('search-modal');
        if (searchModal && searchModal.style.display === 'block') {
          searchModal.style.display = 'none';
        }
      }
    });
  </script>
</body>
</html>